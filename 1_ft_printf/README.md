# ft_printf

## int	ft_printf(const char *format, ...);

>'...'은 '가변 인자' 혹은 '가변 파라미터'라고 불린다.
가변 인자를 나타내는 '...'은 파라미터 순서 상 가장 뒤에 있어야 한다.
가변 인자 함수를 만들기 위해서는 stdarg.h 헤더파일을 include 해야하고 최소 1개 이상의 고정 인수가 있어야 한다.

## va_list ap (Argument Pointer)

함수로 전달되는 인수들은 stack에 저장되며 함수는 stack에서 인수를 꺼내 쓴다.
stack에 있는 인수를 읽을 때 포인터 연산을 해야하는데 현재 읽은 주소값을 기억하기 위해 va_list 형의 포인터 변수 하나가 필요하다.
va_list 타입은 char *형으로 정의되어 있다.

## va_start(ap, 마지막 고정 인수)

ap 포인터 변수가 첫 번째 가변 인수를 가리키도록 초기화한다.
마지막 고정 인수를 전달하는 이유는 첫 번째 가변 인수의 주소를 찾기 위해서이다.
va_start 내부에서는 ap가 마지막 고정 인수 다음 주소를 가리키도록 해주므로 ap를 읽으면 순서대로 가변 인수를 읽을 수 있다.

## va_arg(ap, 인수타입)

가변 인수를 실제로 읽는 명령이다.
va_start가 ap를 첫 번째 가변 인수 주소로 맞추어 주므로 ap의 값을 읽기만 하면 된다.
단, ap에 있는 값이 어떤 타입인지를 지정해야 이 매크로가 값을 정확하게 읽을 수 있기 때문에 읽고자 하는 값의 타입도 전달한다.
타입명이 함수의 인수가 될 수 있는 이유는 이 함수가 매크로 함수이며 내부적으로 sizeof 연산자와 캐스트 연산자로 전달되기 때문이다.

## va_end(ap)

사용한 가변인자 변수를 끝낼 때 사용한다. 단순히 NULL 포인터로 돌려주는 매크로이다.
플랫폼에 따라서 NULL 포인터를 돌려줘야 하는 경우도 있기 때문에 관례적으로 넣어주는 것이 좋다.

<br>
<br>
<br>

### 참고자료

* [C언어 가변인자(가변파라미터)를 사용해보자](https://norux.me/19)
* [C언어 가변인자](https://aossuper8.tistory.com/17)
* [가변인자 함수의 사용](https://jhnyang.tistory.com/293)
* [가변인자 뜯어보기](https://80000coding.oopy.io/b1bc0184-9612-49f2-813b-ffeaf830f4fe)
