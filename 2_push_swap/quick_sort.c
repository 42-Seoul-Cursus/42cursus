# include <stdio.h>
# define LEN 500
# define swap(type, x, y) do {type t = x; x = y; y = t;} while(0)
void quickSort(int arr[], int L, int R);

int cnt = 0;

int main(){
	int i;
	int arr[LEN] = {404,31,165,12,305,79,294,366,219,411,456,452,284,500,402,337,475,431,405,64,69,354,251,42,324,158,384,377,418,441,484,128,135,146,75,327,287,289,350,23,147,470,198,153,314,339,99,440,260,291,225,303,24,345,448,139,143,67,328,180,218,130,387,288,261,331,364,152,355,437,2,399,443,492,188,313,204,200,13,427,95,472,137,450,479,298,132,449,142,170,498,238,224,393,26,174,163,256,216,111,92,124,183,295,338,98,272,77,252,344,1,466,30,264,451,278,103,59,460,257,474,106,244,497,222,445,348,234,186,84,442,39,97,87,375,304,296,187,108,21,285,329,429,391,311,96,240,136,254,433,499,308,292,242,22,55,301,145,467,154,319,83,246,115,316,312,121,422,118,248,112,129,410,160,274,162,494,9,208,346,436,8,480,412,335,496,253,318,343,454,197,156,57,131,430,265,255,227,17,379,299,7,110,322,191,68,93,53,86,237,406,66,483,178,149,414,100,490,421,389,189,282,283,271,315,376,37,385,330,325,101,231,465,40,72,82,28,356,446,157,368,44,367,122,202,362,363,167,326,320,71,164,461,239,51,438,49,241,155,378,245,25,488,27,458,217,268,342,235,495,407,250,203,125,192,259,214,38,279,140,353,182,117,286,340,193,3,41,211,468,428,114,398,60,374,302,33,365,266,403,332,383,361,78,81,205,88,360,199,213,482,409,232,15,293,321,32,90,415,105,416,290,184,141,351,464,481,52,491,54,333,47,262,94,185,196,477,270,194,369,413,228,16,469,6,20,447,166,455,462,459,76,43,359,349,61,394,487,386,478,463,230,309,310,352,444,401,14,276,35,388,432,50,281,334,63,267,177,434,148,373,159,91,172,371,179,151,471,119,171,223,396,11,126,133,201,48,221,392,109,306,390,215,336,380,65,10,113,58,397,36,485,273,190,18,419,341,372,435,439,381,104,247,19,395,73,358,417,80,168,424,400,307,74,134,249,476,243,425,489,426,45,62,89,220,473,138,420,453,116,486,173,4,317,207,209,258,269,120,176,144,212,5,370,323,34,102,46,233,56,175,107,277,275,169,70,150,493,229,127,210,423,347,263,195,226,29,161,206,300,123,457,85,280,236,181,357,382,408,297};

	printf("정렬 전 : ");
	for(i = 0; i < LEN; i++)
		printf("%d ", arr[i]);
	printf("\n");

	quickSort(arr, 0, LEN-1);

	printf("정렬 후 : ");
	for(i = 0; i < LEN; i++)
		printf("%d ", arr[i]);

	return 0;
}

void quickSort(int arr[], int left, int right)
{
		int	pl = left;
		int pr = right;
		int	pivot = arr[(pl + pr) / 2];	// pivot 설정 (가운데)

		do {
			while (arr[pl] < pivot)	// left가 pivot보다 큰 값을 만나거나 pivot을 만날 때까지
				pl++;
			while (arr[pr] > pivot)	// right가 pivot보다 작은 값을 만나거나 pivot을 만날 때까지
				pr--;
			if (pl <= pr)	// left가 right보다 왼쪽에 있다면 교환
			{
				swap(int, arr[pl], arr[pr]); // 교환
				pl++;
				pr--;
			}
			printf("%d\n", ++cnt);
		} while (pl <= pr);	// left가 right 보다 오른쪽에 있을 때까지 반복
	/* recursion */
	if (left < pr)
		quickSort(arr, left, pr);	// 왼쪽 배열 재귀적으로 반복
	if (right > pl)
		quickSort(arr, pl, right);	// 오른쪽 배열 재귀적으로 반복
}
